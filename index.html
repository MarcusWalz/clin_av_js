<html ng-app="todomvc">
<head>
  <meta charset="utf-8">
  <title>Clinical Avatars</title>
  <link rel="stylesheet" type="text/css" href="stylesheets/graph.css"></link>
</head>
<body>
  <section class="todoapp" ng-controller="todoCtrl">
    <svg ng-attr-width="{{vm.width}}" ng-attr-height="{{vm.height}}">
      <defs>
        <marker id="end" viewbox="0 -5 10 10" refX="10" refY="-1.5"
                                                        markerHeight="6"
                                                        markerWidth="6"
          orient="auto"><path d="M0,-5L10,0L0,5"></path>
        </marker>
      </defs>
      <path ng-repeat="edge in graph.getEdges()"
        marker-end="url(#end)" 
        stroke-width="4"
        class="line"
        ng-attr-d="{{vm.d(edge)}}">
      </path>

      <g ng-repeat="node in graph.getNodes()"
          ng-attr-transform="{{ 
          'translate(' + node.x + ',' + node.y + ')' }}"
          ng-mousedown="vm.mouseDown(node)"
          ng-mouseup="vm.mouseUp(node)"
          ng-click="vm.selectNode(node)">
        <g ng-repeat="p in node.donut"
           class="arc" >
          <path ng-attr-d="{{p.arc}}" ng-attr-fill="{{p.color}}"></path>
        </g>
      <circle r="50" 
        ng-class="node === selectedNode ? 'selected' : 'node'"></circle>
        <circle class="delete"
          r="10"
          cx="50"
          cy="-50"
          ng-click="vm.rmNode(node)">
        </circle>
        <text text-anchor="middle">{{node.getName()}}</text>
      </g>
    </svg>
  </section>
  <script src="lib/collections.js"></script>
  <!--
  <script src="lib/angular.js"></script>
  <script data-main="js/entry" src="lib/require.js"></script>
  <script src="js/todomvc.js"></script>
  -->
  <script data-main="js/todomvc" src="lib/require.js"></script>
  <script src="js/config.js"></script>
</body>
a
</html>
